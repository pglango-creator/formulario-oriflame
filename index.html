<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pedido Oriflame</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="container">
    <h1>Pedido Oriflame ğŸ›ï¸</h1>
    <p class="subtitle">Formulario de pedido y asesoramiento personalizado</p>

    <form id="pedidoForm" onsubmit="prepararPedido(event)">
      
      <label>Nombre y apellidos *</label>
      <input type="text" id="nombre" required />

      <label>DirecciÃ³n *</label>
      <input type="text" id="direccion" required />

      <label>CÃ³digo Postal *</label>
      <input type="text" id="cp" required />

      <label>Email *</label>
      <input type="email" id="email" required />

      <label>TelÃ©fono *</label>
      <input type="tel" id="telefono" required />

      <label>Â¿En quÃ© horario te viene mejor que te contacte? (Opcional)</label>
      <input
        type="text"
        id="horario"
        placeholder="Ej: maÃ±anas, tardes, a partir de las 18h"
      />

      <h2>Productos</h2>

      <div id="productos">
        <div class="producto">
          <input type="text" placeholder="CÃ³digo del producto" class="codigo" required />
          <input type="number" placeholder="Cantidad" class="cantidad" min="1" required />
          <button type="button" class="eliminar" onclick="eliminarProducto(this)">ğŸ—‘ï¸</button>
        </div>
      </div>

      <button type="button" class="secundario" onclick="agregarProducto()">
        â• AÃ±adir otro producto
      </button>

      <h2>Asesoramiento (opcional)</h2>
      <textarea
        id="asesoramiento"
        placeholder="CuÃ©ntame en quÃ© puedo ayudarteâ€¦"
      ></textarea>

      <div class="privacidad">
        <input type="checkbox" required />
        <span>
          He leÃ­do y acepto la polÃ­tica de privacidad.  
          Los datos se usarÃ¡n Ãºnicamente para gestionar el pedido y el asesoramiento.
        </span>
      </div>

      <div class="info">
        ğŸ“Œ Si solicitas asesoramiento, me pondrÃ© en contacto contigo lo antes posible.  
        <br />
        ğŸ“¦ Si realizas un pedido, te escribirÃ© para confirmar disponibilidad, importe total
        y forma de pago antes de tramitar el envÃ­o.
      </div>

      <button type="submit" class="principal">Preparar pedido</button>

      <a id="enlaceWA" class="hidden boton-wa" target="_blank">
        Abrir WhatsApp
      </a>
    </form>
  </div>

  <script>
    function agregarProducto() {
      const div = document.createElement("div");
      div.className = "producto";
      div.innerHTML = `
        <input type="text" placeholder="CÃ³digo del producto" class="codigo" required />
        <input type="number" placeholder="Cantidad" class="cantidad" min="1" required />
        <button type="button" class="eliminar" onclick="eliminarProducto(this)">ğŸ—‘ï¸</button>
      `;
      document.getElementById("productos").appendChild(div);
    }

    function eliminarProducto(boton) {
      const productos = document.querySelectorAll(".producto");
      if (productos.length > 1) {
        boton.parentElement.remove();
      }
    }

    function prepararPedido(e) {
      e.preventDefault();

      const nombre = document.getElementById("nombre").value;
      const direccion = document.getElementById("direccion").value;
      const cp = document.getElementById("cp").value;
      const email = document.getElementById("email").value;
      const telefono = document.getElementById("telefono").value;
      const horario = document.getElementById("horario").value;
      const asesoramiento = document.getElementById("asesoramiento").value;

      let productosTexto = "";
      document.querySelectorAll(".producto").forEach((p, i) => {
        const codigo = p.querySelector(".codigo").value;
        const cantidad = p.querySelector(".cantidad").value;
        productosTexto += `${i + 1}. CÃ³digo: ${codigo} - Cantidad: ${cantidad}\n`;
      });

      let mensaje =
`ğŸ›ï¸ *NUEVO PEDIDO ORIFLAME*

ğŸ‘¤ Nombre: ${nombre}
ğŸ  DirecciÃ³n: ${direccion}
ğŸ“® CP: ${cp}
ğŸ“§ Email: ${email}
ğŸ“ TelÃ©fono: ${telefono}
${horario ? "â° Horario de contacto: " + horario : ""}

ğŸ“¦ *Productos:*
${productosTexto}
${asesoramiento ? "ğŸ’¬ Asesoramiento:\n" + asesoramiento : ""}`;

      const url =
        "https://api.whatsapp.com/send?phone=34610274439&text=" +
        encodeURIComponent(mensaje);

      const enlace = document.getElementById("enlaceWA");
      enlace.href = url;
      enlace.classList.remove("hidden");
      enlace.click();
    }
  </script>
</body>
</html>